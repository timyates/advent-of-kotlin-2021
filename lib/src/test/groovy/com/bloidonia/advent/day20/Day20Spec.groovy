package com.bloidonia.advent.day20

import spock.lang.Specification

class Day20Spec extends Specification {

    def example = '''..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#
                    |
                    |#..#.
                    |#....
                    |##..#
                    |..#..
                    |..###'''.stripMargin()

    def "example is as expected"() {
        when:
        def demo = use(Day20Kt) { example.toTrenchMap() }

        then:
        demo.toString() == '''.......
                             |.#..#..
                             |.#.....
                             |.##..#.
                             |...#...
                             |...###.
                             |.......'''.stripMargin()

        when:
        demo = demo.tick(false)

        then:
        demo.toString() == '''.........
                             |..##.##..
                             |.#..#.#..
                             |.##.#..#.
                             |.####..#.
                             |..#..##..
                             |...##..#.
                             |....#.#..
                             |.........'''.stripMargin()

        when:
        demo = demo.tick(false)

        then:
        demo.toString() == '''...........
                             |........#..
                             |..#..#.#...
                             |.#.#...###.
                             |.#...##.#..
                             |.#.....#.#.
                             |..#.#####..
                             |...#.#####.
                             |....##.##..
                             |.....###...
                             |...........'''.stripMargin()
    }
}
